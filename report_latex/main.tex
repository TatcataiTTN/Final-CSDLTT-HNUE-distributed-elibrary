% ============================================================================
% BÁO CÁO MÔN HỌC: CƠ SỞ DỮ LIỆU TIÊN TIẾN
% Đề tài: Xây dựng hệ thống e-Library phân tán nhiều cơ sở
% Nhóm 10 - Cao học K35
% Trường Đại học Sư phạm Hà Nội
% ============================================================================
\documentclass[a4paper,12pt]{report}

% ============================================================================
% PACKAGES
% ============================================================================
\usepackage[utf8]{inputenc}
\usepackage[T5]{fontenc}
\usepackage[vietnamese]{babel}
\usepackage[top=2.5cm, bottom=2.5cm, left=3cm, right=2cm]{geometry}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{tikz}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{float}
\usepackage{indentfirst}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{array}
\usepackage{tabularx}
\usepackage{multirow}

% ============================================================================
% TikZ Libraries
% ============================================================================
\usetikzlibrary{shapes.geometric, arrows, positioning, fit, backgrounds, calc}

% ============================================================================
% Hyperref Configuration
% ============================================================================
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
    pdftitle={e-Library Distributed System - Hệ thống thư viện phân tán},
    pdfauthor={Nhom 10 - Cao hoc K35 - HNUE},
    pdfsubject={Cơ sở dữ liệu tiên tiến},
    pdfkeywords={MongoDB, Distributed Systems, NoSQL, PHP, Docker}
}

% ============================================================================
% Listings Configuration (for code)
% ============================================================================
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{keywordcolor}{rgb}{0.0,0.0,0.6}
\definecolor{stringcolor}{rgb}{0.6,0.1,0.1}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{keywordcolor}\bfseries,
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{stringcolor},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single,
    framesep=3pt,
    xleftmargin=15pt,
    xrightmargin=5pt,
}

\lstset{style=mystyle}

% Define PHP language for listings
\lstdefinelanguage{PHP}{
    keywords={class, function, return, if, else, elseif, foreach, for, while, do, switch, case, break, continue, echo, print, require, require_once, include, include_once, new, public, private, protected, static, const, var, true, false, null, array, try, catch, throw, use, namespace},
    sensitive=true,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]',
}

% Define JSON language
\lstdefinelanguage{json}{
    morestring=[b]",
    morestring=[b]',
    literate=
     *{0}{{{\color{codepurple}0}}}{1}
      {1}{{{\color{codepurple}1}}}{1}
      {2}{{{\color{codepurple}2}}}{1}
      {3}{{{\color{codepurple}3}}}{1}
      {4}{{{\color{codepurple}4}}}{1}
      {5}{{{\color{codepurple}5}}}{1}
      {6}{{{\color{codepurple}6}}}{1}
      {7}{{{\color{codepurple}7}}}{1}
      {8}{{{\color{codepurple}8}}}{1}
      {9}{{{\color{codepurple}9}}}{1}
      {:}{{{\color{red}:}}}{1}
      {,}{{{\color{red},}}}{1}
      {\{}{{{\color{blue}\{}}}{1}
      {\}}{{{\color{blue}\}}}}{1}
      {[}{{{\color{blue}[}}}{1}
      {]}{{{\color{blue}]}}}{1},
}

% Define YAML language
\lstdefinelanguage{yaml}{
    keywords={true, false, null},
    sensitive=false,
    morecomment=[l]{\#},
    morestring=[b]",
    morestring=[b]',
}

% Define JavaScript language
\lstdefinelanguage{javascript}{
    keywords={break, case, catch, continue, debugger, default, delete, do, else, finally, for, function, if, in, instanceof, new, return, switch, this, throw, try, typeof, var, void, while, with, let, const, class, export, extends, import, super, yield, async, await},
    sensitive=true,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]',
    morestring=[b]`,
}

% ============================================================================
% Header/Footer Configuration
% ============================================================================
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\leftmark}
\fancyhead[R]{e-Library Distributed System}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

% Clear header/footer for chapter pages
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{\thepage}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
}

% ============================================================================
% Graphics Path
% ============================================================================
\graphicspath{{screenshots/}{figures/}{../screenshots/}}

% ============================================================================
% Custom Commands
% ============================================================================
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\mongodb}{\texttt{MongoDB}}
\newcommand{\php}{\texttt{PHP}}
\newcommand{\docker}{\texttt{Docker}}

% Centered table column with fixed width
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}p{#1}}

% ============================================================================
% Document Information
% ============================================================================
\title{
    \textbf{BÁO CÁO MÔN HỌC} \\
    \textbf{CƠ SỞ DỮ LIỆU TIÊN TIẾN} \\
    \vspace{1cm}
    \large Đề tài: Xây dựng hệ thống e-Library phân tán nhiều cơ sở \\
    với MongoDB Replica Set
}
\author{
    Nhóm 10 - Cao học K35 \\
    Trường Đại học Sư phạm Hà Nội
}
\date{Tháng 1, 2026}

% ============================================================================
% DOCUMENT
% ============================================================================
\begin{document}

% Title page
\input{titlepage}

% Front matter
\pagenumbering{roman}

% Lời cảm ơn
\input{acknowledgement}

% Lời cam đoan
\input{declaration}

% Mục lục
\tableofcontents
\newpage

% Danh mục hình
\listoffigures
\addcontentsline{toc}{chapter}{DANH MỤC HÌNH}
\newpage

% Danh mục bảng
\listoftables
\addcontentsline{toc}{chapter}{DANH MỤC BẢNG}
\newpage

% Danh mục mã nguồn
\lstlistoflistings
\addcontentsline{toc}{chapter}{DANH MỤC MÃ NGUỒN}
\newpage

% ============================================================================
% MAIN MATTER
% ============================================================================
\pagenumbering{arabic}

% Chương I & II: Tổng quan và Phân tích thiết kế
\input{chapter1_2}

% Chương III: Cài đặt và Đánh giá
\input{chapter3}

% Kết luận, Tài liệu tham khảo và Phụ lục
\input{conclusion}

\end{document}
